<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selector de Días Festivos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
        }
        .selectors {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        select {
            padding: 5px;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        .day {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
            cursor: pointer;
        }
        .day:hover {
            background-color: #f0f0f0;
        }
        .selected {
            background-color: #ffcccc;
        }
        .controls {
            margin-top: 20px;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Selector de Días Festivos</h1>
        <div class="selectors">
            <select id="month">
                <option value="0">Enero</option>
                <option value="1">Febrero</option>
                <option value="2">Marzo</option>
                <option value="3">Abril</option>
                <option value="4">Mayo</option>
                <option value="5">Junio</option>
                <option value="6">Julio</option>
                <option value="7">Agosto</option>
                <option value="8">Septiembre</option>
                <option value="9">Octubre</option>
                <option value="10">Noviembre</option>
                <option value="11">Diciembre</option>
            </select>
            <select id="year">
                <!-- Se llenará con JavaScript -->
            </select>
        </div>
        <div id="calendar" class="calendar">
            <!-- Se llenará con JavaScript -->
        </div>
        <div class="controls">
            <button onclick="guardarFestivos()">Guardar Festivos</button>
        </div>
    </div>

    <script>
        const monthSelect = document.getElementById('month');
        const yearSelect = document.getElementById('year');
        const calendar = document.getElementById('calendar');
        let selectedDays = new Set();

        function initializeYearSelect() {
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year <= currentYear + 5; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }
        }

        function generateCalendar() {
            const month = parseInt(monthSelect.value);
            const year = parseInt(yearSelect.value);
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();

            calendar.innerHTML = '';

            // Añadir encabezados de días
            ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'].forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.textContent = day;
                dayHeader.style.fontWeight = 'bold';
                calendar.appendChild(dayHeader);
            });

            // Añadir espacios en blanco para el primer día
            for (let i = 0; i < firstDay.getDay(); i++) {
                calendar.appendChild(document.createElement('div'));
            }

            // Añadir días del mes
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'day';
                dayElement.textContent = day;
                dayElement.onclick = () => toggleDay(year, month, day, dayElement);
                calendar.appendChild(dayElement);
            }
        }

        function toggleDay(year, month, day, element) {
            const dateString = `${year}-${month+1}-${day}`;
            if (selectedDays.has(dateString)) {
                selectedDays.delete(dateString);
                element.classList.remove('selected');
            } else {
                selectedDays.add(dateString);
                element.classList.add('selected');
            }
        }

        function guardarFestivos() {
            localStorage.setItem('festivosSeleccionados', JSON.stringify([...selectedDays]));
            alert('Días festivos guardados correctamente');
        }

        function cargarFestivos() {
            const festivos = JSON.parse(localStorage.getItem('festivosSeleccionados')) || [];
            selectedDays = new Set(festivos);
            updateCalendarSelection();
        }

        function updateCalendarSelection() {
            const month = parseInt(monthSelect.value);
            const year = parseInt(yearSelect.value);
            document.querySelectorAll('.day').forEach(dayElement => {
                const day = parseInt(dayElement.textContent);
                const dateString = `${year}-${month+1}-${day}`;
                if (selectedDays.has(dateString)) {
                    dayElement.classList.add('selected');
                } else {
                    dayElement.classList.remove('selected');
                }
            });
        }

        monthSelect.onchange = generateCalendar;
        yearSelect.onchange = generateCalendar;

        initializeYearSelect();
        generateCalendar();
        cargarFestivos();
    </script>
</body>
</html>
